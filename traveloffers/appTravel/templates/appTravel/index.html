{% extends 'appTravel/base.html' %}
{% load static %}

{% block titulo %}Inicio - Travel Offers{% endblock %}

{% block contenido %}
<!-- Hero Section -->
<section style="padding-top: 7rem;">
  <!-- Fondo hero -->
  <div class="bg-holder" style="background-image: url('{% static "appTravel/img/hero/hero-bg.svg" %}');"></div>

  <div class="container">
    <div class="row align-items-center">
      <div class="col-md-5 col-lg-6 order-0 order-md-1 text-end">
        <img class="pt-7 pt-md-0 hero-img" src="{% static 'appTravel/img/hero/hero-img.png' %}" alt="hero-header" />
      </div>
      <div class="col-md-7 col-lg-6 text-md-start text-center py-6">
        <h4 class="fw-bold text-danger mb-3">Los mejores destinos alrededor del mundo</h4>
        <h1 class="hero-title">Viaja, disfruta y vive una nueva vida llena de aventuras</h1>
        <p class="mb-4 fw-medium">
          Descubre increíbles ofertas de viaje para tus destinos favoritos.<br class="d-none d-xl-block" />
          Planifica tu viaje perfecto con nosotros y aprovecha las mejores<br class="d-none d-xl-block" />
          ofertas disponibles.
        </p>
        <div class="text-center text-md-start">
          <a class="btn btn-primary btn-lg me-md-4 mb-3 mb-md-0 border-0 primary-btn-shadow" href="/ofertas/" role="button">Ver Ofertas</a>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Ofertas por país -->
<section class="pt-5" id="destination">
  <div class="container">
    <div class="position-absolute start-100 bottom-0 translate-middle-x d-none d-xl-block ms-xl-n4">
      <img src="{% static 'appTravel/img/dest/shape.svg' %}" alt="destination" />
    </div>
    <div class="mb-7 text-center">
      <h5 class="text-secondary">Más Populares</h5>
      <h3 class="fs-xl-10 fs-lg-8 fs-7 fw-bold font-cursive text-capitalize">Ofertas destacadas por país</h3>
    </div>

    <div class="row">
      {% if ofertas_por_pais %}
        {% for pais, oferta in ofertas_por_pais.items %}
          <div class="col-md-4 mb-4">
            <div class="card overflow-hidden shadow h-100">
              {% with gal=oferta.galeria.all %}
                {% if gal and gal|length > 0 %}
                  <img class="card-img-top"
                       src="{{ gal.0.imagen.url }}"
                       alt="{{ pais.nombre }}"
                       style="height:250px;object-fit:cover;">
                {% elif oferta.imagen %}
                  <img class="card-img-top"
                       src="{{ oferta.imagen }}"
                       alt="{{ pais.nombre }}"
                       style="height:250px;object-fit:cover;">
                {% else %}
                  <img class="card-img-top"
                       src="{% static 'appTravel/img/dest/dest1.jpg' %}"
                       alt="{{ pais.nombre }}"
                       style="height:250px;object-fit:cover;">
                {% endif %}
              {% endwith %}

              <div class="card-body py-4 px-3">
                <div class="d-flex flex-column flex-lg-row justify-content-between mb-3">
                  <h4 class="text-secondary fw-medium">
                    <a class="link-900 text-decoration-none stretched-link" href="/ofertas/{{ oferta.id }}/">{{ pais.nombre }}</a>
                  </h4>
                  <span class="fs-1 fw-medium">{{ oferta.precio }}€</span>
                </div>
                <p class="mb-2 text-truncate">{{ oferta.titulo }}</p>
                <div class="d-flex align-items-center">
                  <img src="{% static 'appTravel/img/dest/navigation.svg' %}"
                       style="margin-right:14px"
                       width="20"
                       alt="navigation" />
                  <span class="fs-0 fw-medium">{{ oferta.duracion_dias }} Días</span>
                </div>
              </div>
            </div>
          </div>
        {% endfor %}
      {% else %}
        <div class="col-12 text-center">
          <p class="fs-2 text-secondary">No hay ofertas disponibles en este momento.</p>
        </div>
      {% endif %}
    </div>
  </div>
</section>

<!-- CTA Section -->
<section class="pt-6">
  <div class="container">
    <div class="py-8 px-5 position-relative text-center"
         style="background-color: rgba(223, 215, 249, 0.199); border-radius: 129px 20px 20px 20px;">
      <div class="position-absolute start-100 top-0 translate-middle ms-md-n3 ms-n4 mt-3">
        <img src="{% static 'appTravel/img/cta/send.png' %}" style="max-width:70px;" alt="send icon" />
      </div>
      <div class="position-absolute end-0 top-0 z-index--1">
        <img src="{% static 'appTravel/img/cta/shape-bg2.png' %}" width="264" alt="cta shape" />
      </div>
      <div class="position-absolute start-0 bottom-0 ms-3 z-index--1 d-none d-sm-block">
        <img src="{% static 'appTravel/img/cta/shape-bg1.png' %}" style="max-width:340px;" alt="cta shape" />
      </div>

      <div class="row justify-content-center">
        <div class="col-lg-8 col-md-10">
          <h2 class="text-secondary lh-1-7 mb-7">
            Suscríbete para recibir información, noticias y otras ofertas interesantes
          </h2>
          <form class="row g-3 align-items-center w-lg-75 mx-auto">
            <div class="col-sm">
              <div class="input-group-icon">
                <input class="form-control form-little-squirrel-control"
                       type="email"
                       placeholder="Introduce tu email"
                       aria-label="email" />
                <img class="input-box-icon" src="{% static 'appTravel/img/cta/mail.svg' %}" width="17" alt="mail" />
              </div>
            </div>
            <div class="col-sm-auto">
              <button class="btn btn-danger orange-gradient-btn fs--1">Suscribirse</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</section>
{% endblock %}